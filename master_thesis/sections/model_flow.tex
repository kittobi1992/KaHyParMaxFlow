
In Section \ref{sec:related_lawler} we have shown how a hypergraph $H$ could be transformed into 
a flow network \ShortT{L} such that every minimum-weight $(S,T)$-cutset in $H$ is a
minimum-capacity $(S,T)$-cutset in \ShortT{L} \cite{lawler1973}. However, the resulting flow
network has significantly more nodes and edges than the original hypergraph. Finding a
$(S,T)$-maximum flow is usually a very computation intensive problem. 
Therefore, different modelling approaches, which reduce the number of nodes and edges,
can have a crucial impact on the running time of the flow algorithm. \\
We will present techniques to sparsify the flow network 
propose by Lawler. First, we will show how any subset $V' \subseteq V$ of hypernodes could be removed 
from \ShortT{L} (see Section \ref{sec:heuer_network}). This approach minimizes
the number of nodes, but in some cases the number of edges can be
significantly higher than in \ShortT{L}. But the basic idea of this technique 
can still be applied to remove low degree hypernodes from the \emph{Lawler}-Network without 
increasing the number of edges (see Section \ref{sec:degree_network}). Additionally, we show
how we can remove every hyperedge $e$ of size $2$ by an undirected flow edge between
the corresponding nodes $v_1,v_2 \in e$, which further reduce the
number of nodes and edges (see Section \ref{sec:edge_size_network}). Finally, we combine
the two suggested approaches in a \emph{Hybrid}-Network (see Section \ref{sec:hybrid_network}).



\subsection{Removing Hypernodes via Clique-Expansion}
\label{sec:heuer_network}

In this Section we show how we can remove all hypernodes of \ShortT{L}. If a hypernode $v \in V$
occurs in an augmenting path $P$ the previous node in the path must be a hyperedge node either
$e'$ or $e''$. Further, for all $e \in I(v)$ the capacity $c_L(v,e')$ is $\infty$. This leads to
the conclusion, if we push flow over a hypernode $v$, comming from a hyperedge node, we can redirect
the flow to any hyperedge node $e' \in I(v)$ during the whole maximum flow calculation, because 
$c_L(v,e') = \infty$. A hypernode $v$ acts as a \emph{bridge} between all incident hyperedges in the 
\emph{Lawler}-Network. Therefore, the idea is to remove all hypernodes from \ShortT{L} and instead
inserting for all $v \in V$ a clique between all $e_1, e_2 \in I(v)$ with $e_1 \neq e_2$.
In the following we will define our new network more general and show how to remove
any $V' \subseteq V$.


\begin{definition}
Let $T_H$ be a transformation that converts a hypergraph \HypergraphDef~into 
a flow network \ExtendedT{H}{V'}, where $V' \subseteq V$. \ShortExT{H}{V'} is defined as follows:
\begin{enumerate}
\item $V_H = V\setminus V' \bigcup\limits_{e \in E}\ \{e', e''\}$
\item $\forall v \in V'$ we add a directed edge $(e_1'', e_2'),\ \forall e_1, e_2 \in I(v)$ 
      with $e_1 \neq e_2$ with capacity $c_H(e_1'', e_2') = \infty$ (clique expansion).
\item $\forall e \in E$ we add a directed edge $(e',e'')$
      with capacity $c_H(e',e'') = \omega(e)$ (same as in \ShortT{L}).
\item $\forall v \in V\setminus V'$ we add for each incident hyperedge $e \in I(v)$ two directed
      edges $(v,e')$ and $(e'',v)$ with capacity 
      $c_H(v,e') = c_H(e'',v) := \infty$ (same as in \ShortT{L}).
\end{enumerate} 
\end{definition}

An example of the transformation is shown in \autoref{img:heuer_network}. To show
the correctness of \ShortExT{H}{V'}, we need to proof that a minimum-capacity $(S,T)$-cutset
in \ShortExT{H}{V'} is equal with a minimum-weight $(S,T)$-cutset in $H$. However,
in the correctness proof we need a preparing lemma.

\begin{figure}
\centering
\includegraphics[width=0.8\textwidth]{../img/network_transformation/heuer_transformation.eps}
\caption{Transformation of a hypergraph into a equivalent flow network by removing
         all hypernodes. Note, capacity of the black edges in the flow network is $\infty$.}
\label{img:heuer_network}
\end{figure}

\begin{lemma}
\label{lemma:lemma1}
Let $G = (V,E,c)$ be a graph with a capacity function $c: E \rightarrow \mathbb{R}_+$. Further, 
let $S$ and $T$ be a source and sink set with $S \cap T = \emptyset$ and
$\forall s \in S:\forall (s,v) \in E: c(s,v) = \infty$ and $\forall t 
\in T:\forall (v,t) \in E: c(v,t) = \infty$. \\
For any $V' \subseteq V$ a minimum-capacity $(S,T)$-cutset in $G$ is equal with a minimum-capacity
$(S',T')$-cutset in $G$, where $S' = S\setminus V'\ \cup \bigcup\limits_{s \in I(V' \cap S)} \{s'\}$ and 
$T' = T\setminus V'\ \cup \bigcup\limits_{t' \in I(V' \cap T)} \{t'\}$ and $S' \cap T' = \emptyset$.
\end{lemma}

\begin{proof}
Let $G'$ be the graph obtained by removing all $v \in V' \cap (S \cup T)$. If
the minimum-capacity $(S,T)$-cutset in $G$ is smaller than $\infty$, then no outgoing
edge of a node $s \in S$ and no incomming edge of a node $t \in T$ can be cut, because for all
those edges $e$ the capacity $c(e) = \infty$. If $S' \cap T' = \emptyset$ every
minimum-capacity $(S,T)$-cutset in $G$ is equal with a minimum-capacity $(S',T')$-cutset
in $G'$. 
Each $(S,T)$-cutset in $G$ is also a $(S',T')$-cutset in $G'$ and vice versa.
If the minimum-capacity $(S,T)$-cutset in $G$ is $\infty$, every cutset seperating
$(S,T)$ resp. $(S',T')$ is a minimum $(S,T)$- resp. $(S',T')$-cutset.
\end{proof}

The conclusion of this lemma is, if we want to determine a minimum-capacity $(S,T)$-cutset
in \ShortT{L} (with $S,T \subseteq V$), we can e.g. remove any $s \in S$ resp. $t \in T$ 
(and even from \ShortT{L}) and instead add all incident 
hyperedges $e' \in I(s)$ resp. $e'' \in I(t)$ as sources resp. sinks. The resulting 
minimum-capacity $(S',T')$-cutset in \ShortT{L} is equal with a minimum-capacity $(S,T)$-cutset
in \ShortT{L}. 

\begin{theorem}
\label{theorem:st_cutset_equal}
A minimum-weight $(S,T)$-cutset of a hypergraph \HypergraphDef~(with $S,T \subseteq V,
S \cap T = \emptyset$) is equivalent with a minimum-capacity $(S',T')$-cutset of the
flow network \ExtendedT{H}{V'} ($V' \subseteq V$), where $S' = S \setminus V'\ \cup \bigcup\limits_{e \in I(V' \cap S)} \{e'\}$ and 
$T' = T \setminus V'\ \cup \bigcup\limits_{e \in I(V'\cap T)} \{e''\}$.
\label{theorem:heuer_network}
\end{theorem}

\begin{proof}

Let's consider again the bipartite graph representation $G_L = (V_L,E_L,c_L)$ 
of a hypergraph $H = (V,E,c,\omega)$ presented in Section \ref{sec:related_lawler}, 
where for all $v \in V: c_L(v) = \infty$ and for all $e \in E: c_L(e) = 
\omega(e)$. A minimum-weight $(S,T)$-vertex seperator in $G_L$ is equal
with a minimum-weight $(S,T)$-cutset in $H$. A minimum-weight $(S,T)$-vertex seperator can be calculated
by finding a minimum-capacity $(S,T)$-cutset in \ShortT{L}. Let $G_H$ be the graph obtained by removing
all $v \in V'\setminus (S \cup T)$ of $G_L$ and insert a clique between all $e \in I(v)$. 
A minimum-weight $(S,T)$-vertex seperator in $G_H$ can be calculated by finding a 
minimum-capacity $(S,T)$-cutset in our new network \ShortExT{H}{V'\setminus (S \cup T)}.
We will show that each vertex seperator in $G_L$ is also a vertex seperator in $G_H$ and
vice versa. Finally, with Lemma \ref{lemma:lemma1} follows our assumption. We will 
denote a vertex seperator of a graph $G$ with $\V{G}$ and define $V'' := V' \setminus (S \cup T)$. 
We will show, that $\V{G_L} = \V{G_H}$ with the restriction $\V{G_L} \subseteq E$ and
$\V{G_H} \subseteq E$.

Let's assume, that $\V{G_L} \subseteq E$ is not a vertex seperator in $G_H$. After removing all $e \in \V{G}$ in
$G_H$, there exists still a path $P_H = \{v_1, \ldots, v_k\}$ with $v_1 \in S$ and
$v_k \in T$ in $G_H$. We can extend $P_H$ to a path $P_L$ in $G_L$.
We define $P_L := P_H$ and replaces every occurence of a sequence $v_i = e_1 \in E$ and
$v_{i+1} = e_2 \in E$ with a triple $(e_1,v,e_2)$ in $P_L$, where $v \in e_1 \cap e_2 \cap V''$
(not empty per construction). $P_L$ not contain any vertex of $\V{G_L}$, because
we removed all $v \in \V{G_L}$ from $G_H$ and only hypernodes are added to $P_L$. $P_L$ connects $S$ and 
$T$ in $G_L$, which is a contradiction that $\V{G_L}$ is a vertex seperator in $G_L$.

Let's assume, that $\V{G_H} \subseteq E$ is not a vertex seperator in $G_L$. After removing all $e \in \V{G_H}$ in
$G_L$, there exists still a path $P_L = \{v_1, \ldots, v_k\}$ with $v_1 \in S$ and
$v_k \in T$ in $G_L$. We can extend $P_L$ to a path $P_H$ in $G_H$.
We define $P_H := P_L$ and remove all $v \in P_L \cap V''$ from $P_H$. $G_L$ is a bipartite
graph per definition. Therefore, every path $P_L$ in $G_L$ is an alternating path of hypernodes and
hyperedges. The predecessor and successor of a hypernode $v \in P_L \cap V''$ must be hyperedges
$e_1$ and $e_2$. If $v \in V''$, then $v$ is not contained $G_H$. Instead, there is
a clique between all $e \in I(V) \Rightarrow$ $(e_1,e_2)$ is contained in $G_H$.
$P_H$ not contain any vertex of $\V{G_H}$, because we removed all $v \in \V{G_H}$ from $\V{G_L}$ 
and we removed only hypernodes from $P_L$. $P_H$ connects $S$ and $T$ in $G_H$, which is a contradiction 
that $\V{G_H}$ is a vertex seperator in $G_H$.

A minimum-weight $(S,T)$-vertex seperator in $G_L$ and $G_H$ only contains hyperedges, because
the weight of all hypernodes in $G_L$ and $G_H$ is $\infty$. Therefore, each minimum
$(S,T)$-vertex seperator in $G_L$ is also a minimum-weight $(S,T)$-vertex seperator in $G_H$,
because $\V{G_L} = \V{G_H}$. With Lemma \ref{lemma:lemma1} follows that we can calculate
a minimum-weight $(S,T)$-vertex seperator in $G_L$ resp. $G_H$ by calculating a minimum-capacity
$(S',T')$-cutset in \ShortT{L} resp. \ShortExT{H}{V'}. Therefore, there exists a equivalence
between a minimum-weight $(S,T)$-cutset $E_{min}$ of $H$ and the following statements: 

$E_{min}$ is a minimum-$\ldots$
\begin{enumerate}
\item $\ldots$-weight $(S,T)$-cutset in $H$
\item $\ldots$-weight $(S,T)$-vertex seperator in $G_L$
\item $\ldots$-capacity $(S,T)$-cutset in \ShortT{L}
\item $\ldots$-capacity $(S',T')$-cutset in \ShortT{L} (follows from (iii) with Lemma \ref{lemma:lemma1})
\item $\ldots$-weight $(S,T)$-vertex seperator in $G_H$
\item $\ldots$-capacity $(S,T)$-cutset in \ShortExT{H}{V''}
\item $\ldots$-capacity $(S',T')$-cutset in \ShortExT{H}{V'} (follows from (vi) with Lemma \ref{lemma:lemma1})
\end{enumerate}

%Lawler \cite{lawler1973} showed \autoref{theorem:st_cutset_equal} for his transformation \ShortT{L}.
%The following proof is subdivided into three parts
%\begin{enumerate}
%\item We will show how to map an augmenting path in \ShortExT{H}{V'} to an augmenting
%      path in \ShortT{L}.
%\item We will execute an maximum flow augmenting path algorithm on \ShortExT{H}{V'} and simultanously
%      map every augmenting path in \ShortExT{H}{V'} to \ShortT{L}.
%\item We assume that the flow on \ShortT{L} is not a maximum flow by assuming that still an augmenting
%      path $P$ exists and lead this to a contradiction by constructing an augmenting path $P'$ with $P$
%      on \ShortExT{H}{V'}.
%\end{enumerate}
%
%Let $\gamma: E \times E \rightarrow V' \cup \emptyset$ be a symmetric function ($\gamma(e_1,e_2) = \gamma(e_2,e_1)$), 
%which maps every pair of hyperedges $e_1, e_2 \in E$ to a hypernode $v \in e_1 \cap e_2 \cap V'$. If
%$e_1 \cap e_2 \cap V' = \emptyset$, then $\gamma(e_1,e_2) = \emptyset$. We will use $\gamma$
%to redirect a flow of an edge $(e_1'',e_2')$ or $(e_1',e_2'')$ in \ShortExT{H}{V'} over the same hypernode
%$\gamma(e_1,e_2)$ in \ShortT{L} every time. This is necassary to obtain a valid flow function. 
%
%Let $P = (v_1, \ldots, v_k)$ be an augmenting path in \ShortExT{H}{V'}. If for any $i \in [1,k]: v_i 
%= e_1''$ and $v_{i+1} = e_2'$, we replace $v_i$ and $v_{i+1}$ in $P$ by a triple $(e_1'',\gamma(e_1,e_2),e_2')$. This is
%possible, because $c_L(e_1'',\gamma(e_1,e_2)) = \infty$ and $c_L(\gamma(e_1,e_2),e_2') = \infty$. \\
%If for any $i \in [1,k]: v_i = e_1'$ and $v_{i+1} = e_2''$, we replace $v_i$ and $v_{i+1}$ in $P$
%by a triple $(e_1',\gamma(e_1,e_2),e_2'')$. Since we push flow over of an edge $(e_2'',e_1')$ in \ShortExT{H}{V'}
%every time over the same hypernode $\gamma(e_1,e_2)$ in \ShortT{L}, we ensure that
%$\R{e_1',e_2''} \le \R{e_1',\gamma(e_1,e_2)}$ and $\R{e_1',e_2''} \le \R{\gamma(e_1,e_2),e_2''}$
%is satisfied for the residual capacities. Therefore, replacing $v_i$ and $v_{i+1}$ by the 
%triple $(e_1',\gamma(e_1,e_2),e_2'')$ results in valid augmenting path in \ShortT{L}. \\
%If $e =: v_1 \notin S$, we will choose a random $v \in e \cap V'$ and insert $v$ as first node
%of the augmenting path in \ShortT{L}. If $e =: v_k \notin T$, we will choose a random 
%$v \in e \cap V'$ and insert $v$ as last node of the augmenting path in \ShortT{L}.
%
%With the previously described mapping, we are able to execute an augmenting path 
%maximum flow algorithm on \ShortExT{H}{V'} and simultanously
%map each augmenting path in \ShortExT{H}{V'} on an augmenting path in \ShortT{L}.
%
%Let's assume the calculation of a maximum flow on \ShortExT{H}{V'} do not result in a
%maximum flow on \ShortT{L}. Then there exists an augmenting path $P = \{v_1,\ldots,v_k\}$
%in \ShortT{L}. Let's reverse $P$ and treat it like stack. The node on top of the stack is
%denoted with $P(0)$, the second with $P(1)$ and so on. We will construct an augmenting
%path $P'$ in \ShortExT{H}{V'} with the following rules:\\
%We will denote with $P_k$ the last node added to $P$.
%\begin{enumerate}
%\item If $P' = \emptyset$ and $P(0) \notin S'$, then add $P(1)$ (Note, $P(1) \in S'$, since $P(0) \in V'$)
%to $P'$ and pop $P(0)$ and $P(1)$ from $P$.
%\item If $P' = \emptyset$ and $P(0) \in S'$, then add $P(0)$ and $P(1)$
%to $P'$ and pop $P(0)$ and $P(1)$ from $P$.
%\item If $(P(0),P(1),P(2)) = (e_1'',v,e_2')$, then add 
%\end{enumerate}




%In the following we will extend a $(S',T')$-maximum flow $f_H$ of \ShortExT{H}{V'} to a maximum flow
%$f_L$ on \T{L}~with $(S,T)$ as source and sink sets. \\
%Let $f_H$ be a $(S',T')$-maximum flow on \ShortExT{H}{V'}. 
%We define $f_L$ on \ShortT{L} as follows
%\begin{enumerate}
%\item $\forall e \in E$ we define $f_L(e',e'') := f_H(e',e'')$ and $f_L(e'',e') := f_H(e'',e')$
%\item $\forall (e_1'',e_2') \in E_H$ we choose a random
%      $v \in e_1 \cap e_2 \cap V'$ (which is not empty per construction) and increase the flow on
%      \begin{enumerate}
%      \item $f_L(e_1'',v)$ and $f_L(v,e_2')$ by $f_H(e_1'',e_2')$
%      \item $f_L(e_2',v)$ and $f_L(v, e_1'')$ by $f_H(e_2',e_1'')$ (Note, $f_H(e_2',e_1'') \le c_H(e_2',e_1'') = 0$)
%      \end{enumerate}
%\item $\forall s' \in S'\setminus S$ we choose a random $s \in s' \cap S \cap V'$ and increase the flow on 
%      $f_L(s,s')$ by $\sum_{(s',v) \in E_H} f_H(s',v)$ and define $f_L(s',s) := -f_L(s,s')$
%\item $\forall t'' \in T' \setminus T$ we choose a random $t \in t'' \cap T \cap V'$ and increase the flow on 
%      $f_L(t'',t)$ by $\sum_{(v,t'') \in E_H} f_H(v,t'')$ and define $f_L(t,t'') := -f_L(t'',t)$
%\item $\forall v \in V \setminus V'$ and all incident hyperedges $e \in I(v)$, we define
%      \begin{enumerate}
%      \item $f_L(v,e') := f_H(v,e')$ and $f_L(e',v) := f_H(e',v)$
%      \item $f_L(e'',v) := f_H(e'',v)$ and $f_L(v,e'') := f_H(v,e'')$
%      \end{enumerate}
%\end{enumerate}
%
%Under the assumption that $f_H$ is a valid flow the capacity 
%constraint for $f_L$ is obviously satisfied. $\forall e \in E: c_L(e',e'') = c_H(e',e'')$,
%therefore $f_L(e',e'') \le c_L(e',e'')$. $\forall e_1, e_2 \in E: \forall v \in 
%e_1 \cap e_2: c_H(e_1'',e_2') = c_L(e_1'',v) = c_L(v,e_2') = \infty$ and 
%$c_H(e_2',e_1'') = c_L(v, e_1'') = c_L(e_2',v) = 0$, therefore (iia) and
%(iib) also satisfy the capacity constraint. All outgoing edges of a node $s \in S$
%and all incomming edges of a node $t \in T$ have a capacity equal to $\infty$. 
%We can set the flow $f_L$ on those edges to any value. All edges covered by (v) exists
%in both networks with the same capacity.\\
%Per definition of (iia) and (iib) $\forall v \in V'\setminus S \cup T$ the amount of flow entering $v$
%is the same as exiting $v$. Further, we have to proof the conservation of flow constraint
%for each hyperedge node in $V_L$.
%\begin{align*}
%\forall e' \in V_L\setminus S': \sum_{(v,e') \in E_L} f_L(v,e') + f_L(e'',e') 
%\stackrel{(iia) + (v)}{=} \sum_{\substack{(v,e') \in E_H \\ v \in V\setminus V'}} f_H(v,e')  + 
%\sum_{\substack{(e,e') \in E_H \\ e \neq e'', e \notin V\setminus V'}} f_H(e,e') + f_H(e'',e') \\
%= \sum_{\substack{(e',v) \in E_H \\ v \in V\setminus V'}} f_H(e',v) +
%\sum_{\substack{(e',e) \in E_H \\ e \neq e'', e \notin V\setminus V'}} f_H(e',e) + f_H(e',e'') 
%\stackrel{(iib) + (v)}{=} \sum_{(e',v) \in E_L} f_L(e',v) + f_L(e',e'')
%\end{align*}
%For all $e'' \in V_L \setminus T'$ the proof is equivalent. Each $e' \in S'$ and $e'' \in T'$
%also satisfy the constraint by definition of (iii) and (iv). Finally, the value of the flow
%$|f_L|$ on \ShortT{L} is the same as the maximum flow $|f_H|$ on \ShortT{H}.
%
%\[ |f_L| = \sum_{\substack{(s,e) \in E_L, \\ s \in S}} f_L(s,e) 
%\stackrel{(iii)}{=} \sum_{\substack{(s,e) \in E_H, \\ s \in S'}} f_L(s,e) = |f_H|\]
%
%$f_L$ is a valid flow on \ShortT{L} with $(S,T)$ as source and sink sets. Let's assume
%$f_L$ is not a maximum flow. Then we will find an augmenting path $P = (p_1, \ldots, p_k)$
%(with $p_i \in V_L$) in the residual graph of \ShortT{L}. Let $P' = (p_1',\ldots,p_{k'}')$
%be the resulting path in \ShortExT{H}{V'}~by removing all $p_i \in V'$ in $P$. Then $P'$ is an
%augmenting path in \ShortExT{H}{V'}. This is a contradiction to the assumption that $f_H$ is
%a maximum flow on \ShortExT{H}{V'}. Therefore, $f_L$ is a maximum flow on \ShortT{L} and the
%minimum-capacity $(S',T')$-cutset of \ShortExT{H}{V'} is a minimum-weight $(S,T)$-cutset
%in $H$.

\end{proof}

As a consequence of this Theorem a minimum-weight $(S,T)$-cutset of $H$ can be calculated with
\ShortExT{H}{V'} the same way as with \ShortT{L} (see Section \ref{sec:related_lawler}). A open
problem is how to obtain the corresponding bipartition. In \ShortT{L} all hypernodes
reachable from nodes in $S$ are part of the first and all not reachable are part of the
second partition. Since we delete all nodes $v \in V'$ from \ShortT{L} in \ShortExT{H}{V'} this
relationship is no longer valid. 

\begin{lemma}
\label{lemma:bipartition_construction}
Let $f$ be a maximum $(S,T)$-flow and $A$ be the set of all nodes reachable
from a node $s \in S$ in the residual graph of \ShortT{L}.
\[ \text{If } v \in A \Leftrightarrow \exists e \in I(v): e'' \in A \]
\end{lemma}

\begin{proof}
If $e'' \in A$, then $v \in A$, because $c_L(e'',v) = \infty$ and $r_f(e'',v) = \infty$.
Let's assume, if $v \in A$, then $\forall e \in I(v): e'' \notin A \Rightarrow f(e'',v) = 0$. 
Otherwise $r_f(v, e'')$ would be greater than zero and this would imply $e'' \in A$. Each path 
$P$ in the \emph{residual graph} of \ShortT{L} from $s \in S$ to $v$ must be of the 
form $P = (\ldots,e',v)$. For at least one $e \in I(v)$ there must be a positive flow $f(v,e') > 0$,
otherwise edge $(e',v)$ is not in the \emph{residual graph} of \ShortT{L} ($c_L(e',v) = 0$).
There is a positive flow leaving node $v$, but there is no flow entering node $v$, because
$\forall e \in I(v): f(e'',v) = 0$. This violates the conservation of flow
constraint for node $v$ and therefore $f$ is not a valid flow function. There must exist at least one $e \in I(v)$
with $f(e'',v) > 0 \Rightarrow r_f(v,e'') > 0 \Rightarrow e'' \in A$.
\end{proof}

Lemma \ref{lemma:bipartition_construction} gives us an alternative construction technique for the minimum-weight $(S,T)$-bipartition
of $H$ with both networks \ShortT{L} and \ShortExT{H}{V'}. Regardless of the flow network, we can 
calculate a maximum flow on it and define the set $E''$, which contains all \emph{outgoing hyperedge
nodes} $e''$ \emph{reachable} from a source node $s \in S$ in the \emph{residual graph} of the flow network. 
Further, we define $A = \bigcup_{e \in E''} e$, then $(A,V\setminus A)$ is a 
minimum-weight $(S,T)$-bipartition of $H$.


\subsection{Removing Low-Degree Hypernodes}
\label{sec:degree_network}

The resulting flow network \ShortExT{H}{V} proposed in Section \ref{sec:heuer_network} has significantly
less nodes than the network \ShortT{L} suggested by Lawler. On the other hand, the number of
edges can be much larger. \\
Let's consider a hypernode $v \in V$. We replace $v$ in \ShortT{L} with a clique between all
hyperedges of $I(v)$. The number of edges inserted in \ShortExT{H}{V} depends on the degree of
$v$. Every hypernode $v \in V$ induce $d(v)(d(v) - 1)$ edges in \ShortExT{H}{V}. In \ShortT{L} a hypernode adds $2d(v)$ edges to the network with the drawback
of an additional node. A simple observation is that for all hypernodes with $d(v) \le 3$ the inequality
$d(v)(d(v) - 1) \le 2d(v)$ is satisfied. Removing such low degree hypernodes not only reduce
the number of nodes, but also the number of edges. \\
Let $V_{d}(n) = \{v\ |\ v \in V\ \land\ d(v) \le n\}$ be the set of all hypernodes
with degree smaller or equal $n$. Then our suggested flow network is \ShortExT{H}{V_d(3)}.

\begin{enumerate}
\item \todo{Think about removing node via Clique Expansion, e.g. $e_1 \cap e_2 = \{v_1,v_2\}$}
\end{enumerate}

\subsection{Removing Hyperedges via Undirected Flow-Edges}
\label{sec:edge_size_network}

If we want to find a minimum-weight $(S,T)$-cutset in a graph $G = (V,E,\omega)$, we do not need to transform
$G$ into a equivalent flow network. We can directly operate on the graph with capacities
$c(e) = \omega(e)$ for all $e \in E$ \cite{ford1956maximal}. Hypergraphs are generalizations of graph, where
an edge can consist of more than two nodes. However, a hyperedge $e$ of size $2$ can still be 
interpreted as a graph edge. Instead of modelling those edges as described by Lawler \cite{lawler1973}
(see hyperedge $e_2$ in \autoref{img:lawler_transformation}), we can remove all $e',e''$ for all $e \in E$
with $|e| = 2$ and add an undirected flow edge between $v_1,v_2 \in e$ (with $v_1 \neq v_2$) with
capacity $c(\{v_1,v_2\}) = \omega(e)$.

\begin{definition}
Let $T_G$ be a transformation that converts a hypergraph \HypergraphDef~into 
a flow network \T{G}. \ShortT{G} is defined as follows:
\begin{enumerate}
\item $V_G = V \cup \bigcup\limits_{\substack{e \in E \\ |e| \neq 2}}\ \{e', e''\}$
\item $\forall e \in E$ with $|e| = 2$ and $v_1,v_2 \in e$ ($v_1 \neq v_2$) we add 
      two directed edges $(v_1,v_2)$ and $(v_2,v_1)$ to $E_G$ with capacity $c(v_1,v_2) = \omega(e)$
      and $c(v_2,v_1) = \omega(e)$
\item Let $H' = (V,E',c,\omega)$ be the hypergraph with $E' = \{e\ |\ e \in E \land |e| \neq 2\}$,
      then we add all edges of $T_L(H')$ to $E_G$ with their corresponding capacities.
\end{enumerate} 
\end{definition}

An example of transformation \ShortT{G} is shown in \autoref{img:graph_transformation}. A hyperedge
$e$ of size $2$ consists in \ShortT{L} exactly of $4$ nodes and $5$ edges (see \autoref{img:lawler_transformation}).
The same hyperedge induce $2$ nodes and $2$ edges in \ShortT{G}. 
 
\begin{figure}
\centering
\includegraphics[width=0.8\textwidth]{../img/network_transformation/graph_transformation.eps}
\caption{Transformation of a hypergraph into a equivalent flow network by inserting 
         an undirected edge with capacity $\omega(e)$ for each hyperedge of size $2$. 
         Note, capacity of the black edges in the flow network is $\infty$.}
\label{img:graph_transformation}
\end{figure}

\begin{theorem}
\label{theorem:st_cutset_equal_graph}
A minimum-weight $(S,T)$-cutset of a hypergraph \HypergraphDef~(with $S,T \subseteq V,
S \cap T = \emptyset$) is equal with a minimum-capacity $(S,T)$-cutset of the
flow network \T{G}.
\label{theorem:heuer_network}
\end{theorem}

\begin{proof}

We define a bijective function $\Phi: E_L \rightarrow E_G$ as follows
\[ \Phi(e',e'') = 
   \begin{cases}
      (e',e''), \text{if } |e| \neq 2, \\
      \{v_1,v_2\}, \text{otherwise (with $v_1,v_2 \in e$ and $v_1 \neq v_2$)}
   \end{cases} \]

We will show that each $(S,T)$-cutset $A_L$ in \ShortT{L} is a $(S,T)$-cutset $\Phi(A_L)$ in
\ShortT{G} and vice versa. Per defintion $c_L(A_L) = c_G(\Phi(A_L))$ and for each $(S,T)$-cutset
$A_G$ in \ShortT{G} $c_G(A_G) = c_L(\Phi^{-1}(A_G))$. Therefore, each minimum-capacity $(S,T)$-cutset
in \ShortT{L} must be a minimum-capacity $(S,T)$-cutset in \ShortT{G} and vice versa. In the following 
let $E^* = \bigcup_{e \in E} \{(e',e'')\}$. \\
Let $A_L \subseteq E^*$ be a $(S,T)$-cutset in \ShortT{L}. Let's assume $\Phi(A_L)$ is not a $(S,T)$-cutset
in \ShortT{G} after removing all edges $e \in \Phi(A_L)$ from \ShortT{G}. Then there exists a path
$P_G = \{v_1,\ldots,v_k\}$ connecting $S$ and $T$ in \ShortT{G} not containing any edge $e \in \Phi(A_L)$.
Let $P_L$ be the path in \ShortT{L} obtained by inserting edge $\Phi^{-1}(v_i,v_{i+1})$ between all
$v_i = v_1 \in V$ and $v_{i+1} = v_2 \in V$ into $P_G$. $\Phi^{-1}(v_i,v_{i+1}) \notin A_L$, otherwise
we would had removed edge $(v_i,v_{i+1})$ from \ShortT{G}. $P_G$ connects $S$ and $T$ in \ShortT{G} 
$\Rightarrow$ $P_L$ connects $S$ and $T$ in \ShortT{L}, which is a contradiction to the assumption
that $A_L$ is a $(S,T)$-cutset. \\
Let $A_G \subseteq \Phi(E^*)$ be a $(S,T)$-cutset in \ShortT{G}. Let's assume $\Phi^{-1}(A_G)$ is not
a $(S,T)$-cutset in \ShortT{L} after removing all edges $e \in \Phi^{-1}(A_G)$ from \ShortT{L}. Then
there exists a path $P_L = \{v_1,\ldots,v_k\}$ connecting $S$ and $T$ in \ShortT{L} not containing any
edge $e \in \Phi^{-1}(A_G)$. Let $P_G$ be the path in \ShortT{G} obtained by removing each edge
$(v_i,v_{i+1})$ with $v_i = e'$ and $v_{i+1} = e''$ and $|e| = 2$ from $P_L$. Based on the construction
of \ShortT{L} the predecessor of $v_i$ and successor of $v_{i+1}$ must be a hypernode.
Therefore, $P_G$ is a valid path in \ShortT{G} connecting $S$ and $T$, which not contains any edge in 
$A_G$. This is a contradiction to the assumption that $A_G$ is a $(S,T)$-cutset.

%We will use a similiar proof technique as in \autoref{theorem:st_cutset_equal}. However,
%we have to adapt the mapping of a $(S,T)$-maximum flow $f_G$ in \ShortT{G} to a valid
%flow function $f_L$ on \T{L}. Further, we will define $m_+(v_1,v_2) := 
%\max{(f_G(v_1,v_2),f_G(v_2,v_1))}$ and $m_-(v_1,v_2) := \min{(f_G(v_1,v_2),
%f_G(v_2,v_1))}$
%\begin{enumerate}
%\item $\forall \bar{e} \in E_G \cap E_L: f_L(\bar{e}) := f_G(\bar{e})$ and the 
%      flow on the reverse edge $\overleftarrow{\bar{e}}$ is defined as
%      $f_L(\overleftarrow{\bar{e}}) := f_G(\overleftarrow{\bar{e}})$.
%\item $\forall e \in E$ with $|e| = 2$ and $v_1,v_2 \in e$ (with $v_1 \neq v_2$) we
%      define
%      \begin{enumerate}
%      \item $f_L(v_1,e') = f_L(e'',v_2) := \frac{m_+(v_1,v_2)}{2}$
%      \item $f_L(v_2,e') = f_L(e'',v_1) := \frac{m_+(v_1,v_2)}{2}$
%      \item $f_L(e',e'') := m_+(v_1,v_2)$
%      \end{enumerate}
%\item $\forall e \in E$ with $|e| = 2$ and $v_1,v_2 \in e$ (with $v_1 \neq v_2$) we
%      define
%      \begin{enumerate}
%      \item $f_L(v_1,e'') = f_L(e',v_2) := \frac{m_-(v_1,v_2)}{2}$
%      \item $f_L(v_2,e'') = f_L(e',v_1) := \frac{m_-(v_1,v_2)}{2}$
%      \item $f_L(e'',e') := m_-(v_1,v_2)$
%      \end{enumerate}
%\end{enumerate}
%
%We have to show that $f_L$ is a valid flow function for all nodes in \ShortT{L} that
%are part of a hyperedge of size $2$. For all other nodes exists a one-one correspondence
%between \ShortT{L} and \ShortT{G}. If we increase the flow of an edge $(v_1,v_2) \in E_G$, we
%decrease the flow on $(v_2,v_1) \in E_G$ by the same amount and vice versa. 
%Therefore, $f(v_1,v_2) = -f(v_2,v_1)$ for all $(v_1,v_2) \in E_G$ (Note, $v_1,v_2 \in V$).
%It follows that $0 \le m_+(v_1,v_2) \le c_G(v_1,v_2) = \omega(e)$ and 
%$m_-(v_1,v_2) \le 0$. Therefore, the capacity constraint is satisfied for all flows 
%defined in (ii) and (iii). \\
%Let $e \in E$ be a hyperedge of size $2$ with $v_1, v_2 \in e$ ($v_1 \neq v_2$).
%\begin{align*}
%f_L(v_1, e') + f_L(v_2, e') \stackrel{(ii)}{=} m_+(v_1,v_2) \stackrel{(ii)}{=} f_L(e',e'') \\
%f_L(e', e'') \stackrel{(ii)}{=} m_+(v_1,v_2) \stackrel{(ii)}{=} f_L(e'', v_1) + f_L(e'', v_2)
%\end{align*}
%Let's assume for reasons of simplicity, that $e$ is the only hyperedge of size $2$ in $I(v_1)$.
%\begin{align*}
%\sum_{\substack{(e'',v_1) \in E_L \\ e'' \neq e}} f_L(\bar{e},v_1) + f_L(e'', v_1) 
%\stackrel{(i) + (ii)}{=} \sum_{(e'',v_1) \in E_G} f_G(e'',v_1) + \frac{m_+(v_1,v_2)}{2} \\
%= \sum_{(v_1, e') \in E_G} f_G(v_1, e') + \frac{m_+(v_1,v_2)}{2}
%\stackrel{(i) + (ii)}{=} \sum_{\substack{(v_1, e') \in E_L \\ e' \neq e}} f_G(v_1, e') + f_L(v_1, e')
%\end{align*}
%The same equations can be applied on $v_2$. If $e$ is not the only hyperedge of 
%size $2$ in $I(v_1)$, then we replace the last term by a summation over 
%all incident hyperedges of $v_1$ of size $2$. \\
\end{proof}

A minimum-weight $(S,T)$-cutset of $H$ can be calculated in \ShortT{G} the same way as in
\ShortT{L}. Each edge $(v_1,v_2)$ with $v_1,v_2 \in V$ in the minimum-capacity
$(S,T)$-cutset of \ShortT{G} can be mapped to their corresponding hyperedge
with $\Phi^{-1}(v_1,v_2)$. Since their exists a one-one correspondence between the hypernodes
of \ShortT{L} and \ShortT{G} the corresponding bipartion are all hypernodes \emph{reachable}
from a node in $S$ and all not \emph{reachable} from $S$ in the \emph{residual graph}
of \ShortT{G}. 

\subsection{Combining Techniques in a Hybrid Flow Network}
\label{sec:hybrid_network}

On many real world instances the average hyperedge size and hypernode degree are inversely
proportional to each other. E.g., if the number of hyperedges is much greater than the
number of hypernodes the average hypernode degree is usually much larger than $3$. Whereas
the average hyperedge size is often equal to $2$. If the number of hyperedges is nearly equal
to the number of hypernodes the average hypernode degree is usually smaller or equal than $3$. Whereas
the average hyperedge size is often much larger than $2$. Of course, we can construct instances
where this inversely proportional relationship can not be observed, but on real world instances
we often find the described behaviour. \\
Currently, we have two differenct modelling approaches which either perform better on low hypernode degree
instances or on small hyperedge size instances. Taking our observation from real world instances 
into account means that either \ShortT{G} or \ShortExT{H}{V_d(3)} performs significantly better on
a specific real world instance. It would be preferable to combine the two approaches into one network 
which performs on the most instances best. \\

\begin{definition}
Let $T_{\text{Hybrid}}$ be a transformation that converts a hypergraph \HypergraphDef~into 
a flow network \Hybrid, where $V' = \{v\ |\ v \in V_d(3)\ 
\land\ \forall e \in I(v): |e| \neq 2\}$. \ShortHybrid~is defined as follows:
\begin{enumerate}
\item $V_{\text{Hybrid}} = V\setminus V' \bigcup\limits_{\substack{e \in E \\ |e| \neq 2}}\ \{e', e''\}$
\item $\forall v \in V'$ we add a directed edge $(e_1'', e_2'),\ \forall e_1, e_2 \in I(v)$ 
      with $e_1 \neq e_2$ with capacity $c_{\text{Hybrid}}(e_1'', e_2') = \infty$ (clique expansion).
\item $\forall e \in E$ with $|e| = 2$ and $v_1,v_2 \in e$ ($v_1 \neq v_2$) we add 
      two directed edges $(v_1,v_2)$ and $(v_2,v_1)$ with capacity $c_{\text{Hybrid}}(v_1,v_2) = \omega(e)$
      and $c_{\text{Hybrid}}(v_2,v_1) = \omega(e)$
\item $\forall e \in E$ with $|e| \neq 2$ we add a directed edge $(e',e'')$
      with capacity $c_{\text{Hybrid}}(e',e'') = \omega(e)$ (same as in \ShortT{L}).
\item $\forall v \in V\setminus V'$ we add for each incident hyperedge $e \in I(v)$ with $|e| \neq 2$ 
      two directed edges $(v,e')$ and $(e'',v)$ with capacity 
      $c_{\text{Hybrid}}(v,e') = c_{\text{Hybrid}}(e'',v) := \infty$ (same as in \ShortT{L}).
\end{enumerate} 
\end{definition}

In \autoref{img:transformation_chain} all explained transformations of this section are illustrated.
The proof of \autoref{theorem:st_cutset_equal_graph} can be used one-to-one to show that a minimum-capacity
$(S',T')$-cutset of \ShortExT{H}{V'} is equal with a minimum-capacity $(S',T')$-cutset of \ShortHybrid~
(for definition of $S'$ and $T'$ see \autoref{theorem:st_cutset_equal}). It follows with Lemma \ref{lemma:lemma1}
that this is equal with a minimum-weight $(S,T)$-cutset of $H$. \\
In the definition of \ShortHybrid~we prefer a hyperedge removal over a hypernode removal. E.g., if
a hypernode has a degree smaller or equal than $3$, we only remove it, if there is no hyperedge
$e \in I(v)$ with $|e| = 2$. The reason is that a hyperedge removal always decrease the number of nodes
and edges more than a hypernode removal. \\
The minimum-weight $(S,T)$-cutset of $H$ can be calculated with the same technique described in Section
\ref{sec:edge_size_network}. Let's define with $(A,V\setminus A)$ the corresponding bipartition.
$A$ is the union of all reachable hypernodes from $S'$ and the union of
all reachable \emph{outgoing hyperedge nodes} $e''$ from $S'$ (see Section \ref{sec:heuer_network} 
and Lemma \ref{lemma:bipartition_construction}).



\begin{figure}
\centering
\includegraphics[width=0.95\textwidth]{../img/network_transformation/hybrid_transformation.eps}
\caption{Illustration of all presented transformations of a hypergraph into a flow network.}
\label{img:transformation_chain}
\end{figure}
