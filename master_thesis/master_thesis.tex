% Vorlage für eine Bachelorarbeit - 2012-2013 Timo Bingmann

% Dies ist nur eine Vorlage. Strikte Vorgaben wie die Bachelorarbeit auszusehen
% hat gibt es nicht. Darum können auch alle Teile angepasst werden.

\documentclass[12pt,a4paper,twoside, enabledeprecatedfontcommands]{scrartcl}

% Diese (und weitere) Eingabedateien sind in UTF-8
\usepackage[utf8]{inputenc}

% Verwende gute Type 1 Font: Latin Modern
\usepackage[T1]{fontenc}
\usepackage{lmodern}

% Sprache des Dokuments (für Silbentrennung und mehr)
\usepackage[german,english]{babel}

% Seitengröße - verwende fast die ganze A4 Seite
\usepackage[tmargin=22mm,bmargin=22mm,lmargin=20mm,rmargin=20mm]{geometry}

% Einrückung und Abstand zwischen Paragraphen
\setlength\parskip{\smallskipamount}
\setlength\parindent{0pt}

% Einige Standard-Mathematik Pakete
\usepackage{latexsym,amsmath,amssymb,mathtools,textcomp}
\usepackage{listings}

% Unterstützung für Sätze und Definitionen
\usepackage{amsthm}
\usepackage{booktabs} %for top, middle and bottomline
\usepackage{bigstrut}
    \setlength\bigstrutjot{3pt}

\newtheorem{Satz}{Satz}[section]
\newtheorem{Definition}[Satz]{Definition}
\newtheorem{Lemma}[Satz]{Lemma}

\numberwithin{equation}{section}

% Deutsches Literaturverzeichnis
\usepackage{bibgerm}

% Unterstützung zum Einbinden von Graphiken
\usepackage{graphicx}

% Pakete die tabular und array verbessern
\usepackage{array,multirow}

% Kleiner enumerate und itemize Umgebungen
\usepackage{enumitem}

\setlist[enumerate]{topsep=0pt}
\setlist[itemize]{topsep=0pt}
\setlist[description]{font=\normalfont,topsep=0pt}

\setlist[enumerate,1]{label=(\roman*)}

% TikZ für Graphiken in LaTeX
\usepackage{tikz}
\usetikzlibrary{calc}

\usepackage{pgfplots}
\usepgfplotslibrary{external}
\tikzexternalize[prefix=experiments/]

\usepackage{pifont}
\usepackage{pbox}
\usepackage{longtable}

% Aktuelle Section und Untersection am Seitenkopf
\usepackage{fancyhdr}

\fancypagestyle{plain}{
  \fancyhead{}
  \fancyfoot{}
  \fancyfoot[LE,RO]{\normalsize\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}

\fancypagestyle{normal}{
  \setlength{\headheight}{20pt}
  \setlength\footskip{32pt}
  \fancyhead{}
  \fancyhead[LE]{\normalsize\textsc{\nouppercase{\leftmark}}}
  \fancyhead[RO]{\normalsize\textsc{\nouppercase{\rightmark}}}
  \fancyfoot{}
  \fancyfoot[LE,RO]{\normalsize\thepage}
  \renewcommand{\headrulewidth}{0.4pt}
  \renewcommand{\footrulewidth}{0pt}
}

% Hyperref für Hyperlink und Sprungtexte
\usepackage{xcolor,hyperref}
\usepackage{subcaption}
\usepackage{graphicx}

\hypersetup{
  pdftitle={High Quality Hypergraph Partitioning via Max-Flow-Min-Cut Computations},
  pdfauthor={Tobias Heuer},
  pdfsubject={Stichworte, weiteres Stichwort},
  colorlinks=true,
  pdfborder={0 0 0},
  bookmarksopen=true,
  bookmarksopenlevel=1,
  bookmarksnumbered=true,
  linkcolor=blue!60!black,
  %linkcolor=black,
  citecolor=blue!60!black,
  urlcolor=blue!60!black,
  filecolor=green!60!black,
  pdfpagemode=UseNone,
  unicode=true,
}

% Paket zum Setzen von Algorithmen in Pseudocode mit kleinen Stilanpassungen
\usepackage[ruled,vlined,linesnumbered,norelsize]{algorithm2e}
\DontPrintSemicolon
\def\NlSty#1{\textnormal{\fontsize{8}{10}\selectfont{}#1}}
\SetKwSty{texttt}
\SetCommentSty{emph}
\def\listalgorithmcfname{Algorithmenverzeichnis}
\def\algorithmautorefname{Algorithmus}
\let\chapter=\section % repariert ein Problem mit algorithm2e

\input{../macros}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagestyle{empty} % keine Seitenzahlen

% Titelblatt der Arbeit
\begin{titlepage}

  \begin{center}\large
 
    \quad\includegraphics[height=17mm]{../img/logo/kit_logo_en.pdf} \hfill
    %\includegraphics[height=20mm]{../img/logo/grouplogo-algo-blue.pdf}\quad\null

    \vfill

    Master-Thesis
    \vspace*{2cm}

    {\textbf{\huge High Quality Hypergraph Partitioning \\ via Max-Flow-Min-Cut Computations} \par}
    % Siehe auch oben die Felder pdftitle={}
    % mit \par am Ende stimmt der Zeilenabstand

    \vfill

    Tobias Heuer

    \vspace*{45mm}

    \begin{tabular}{rl}
      Advisors: & Prof. Dr. Peter Sanders \\
      & M. Sc. Sebastian Schlag\\
    \end{tabular}
    
    \vspace*{10mm}

    %Institut für Theoretische Informatik, Algorithmik \\
    %Fakultät für Informatik \\
    %Karlsruher Institut für Technologie

    % English:
    Institute of Theoretical Informatics, Algorithmics \\
    Department of Informatics \\
    Karlsruhe Institute of Technology

    \vspace*{15mm}

    Date of submission: 22.12.2017

    \vspace*{12mm}
  \end{center}

\end{titlepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\vspace*{0pt}\vfill

\hrule\medskip

Hiermit versichere ich, dass ich diese Arbeit selbständig verfasst und keine anderen, 
als die angegebenen Quellen und Hilfsmittel benutzt, die wörtlich oder inhaltlich 
übernommenen Stellen als solche kenntlich gemacht und die Satzung des Karlsruher 
Instituts für Technologie zur Sicherung guter wissenschaftlicher Praxis in der jeweils 
gültigen Fassung beachtet habe.

\bigskip

\noindent
Karlsruhe, den 22.12.2017

% Unterschrift (handgeschrieben)

\vspace*{5cm}

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\vspace*{0pt}\vfill

\selectlanguage{english}
\begin{abstract}
\centerline{\textbf{Abstract}}

All state-of-the-art multilevel hypergraph partitioner implements the \emph{FM} 
heuristic \cite{fiduccia1988linear} to improve a balanced $k$-way partition. 
In each step, the \emph{FM} algorithm moves a node with maximum \emph{gain} 
from its current block to the other block according to an objective
function. The \emph{gain} of moving a hypernode mainly depends on 
the state of all incident hyperedges. Therefore, \emph{FM} only incorporates
\emph{local} information about the problem structure and performs a move
\emph{greedily}. Consequently, the solution quality heavily depends on the 
\emph{initial partition} and the quality of the \emph{coarsening} algorithm \cite{dutt1997vlsi}.
Moreover, if we have a large number of moves with equal gain, the quality of the solution 
is a result of random choices made within the algorithm
\cite{krishnamurthy1984improved,mann2014formula}. Especially for large hyperedges, we often
have many moves of vertices which gain is equal to zero if, e.g., the \emph{cut} metric is the objective function. \\
The well-known \emph{max-flow min-cut} theorem \cite{ford1956maximal} establish an analogy
between the \emph{global} minimum cut of a network separating two vertices and the maximum flow between
them. The technique incorporates \emph{global} information about the problem structure and
is not \emph{move}-based. Therefore, utilizing such techniques as \emph{local search}
heuristic would overcome the drawbacks of the \emph{FM} algorithm.\\
In this thesis, we present an alternative 
\emph{local search} algorithm based on \emph{Max-Flow-Min-Cut}
computations for balanced direct $k$-way hypergraph partitioning.
We integrate our framework into the $n$-level hypergraph partitioner \emph{KaHyPar} \cite{heuer2017improving}. 
The framework is inspired by the work of Sanders and Schulz \cite{sanders2011engineering} who
successfully showed that \emph{flow}-based \emph{local search} in combination with the \emph{FM}
algorithm significantly improves the quality of partitions in a multilevel graph partitioner.
We generalize many ideas of them such that they are applicable in the multilevel hypergraph 
partitioning context. We present several techniques to sparsify the state-of-the-art hypergraph 
flow network representation \cite{lawler1973}. The theoretical results are of independent interest because they
can also be applied to general flow networks. Our experiments indicate
that maximum flow algorithms are up to a factor of $3$ faster on our network in practice.
Further, we show how to configure a flow problem on a subhypergraph such that a 
\emph{Max-Flow-Min-Cut} computation improves a balanced $k$-way partition. \\
We tested our new approach
on a large benchmark set with $3222$ instances. In comparison to $5$ different systems, 
our new configuration outperforms the tested state-of-the-art hypergraph partitioner on $70\%$ 
of the instances. In comparison to the latest version of \emph{KaHyPar}, our new approach 
produces $2\%$ better quality while only incurring a performance slowdown by a factor of $2$. 
Moreover, our partitioner has a comparable running time to the direct $k$-way version 
of \emph{hMetis} and outperforms it on $82\%$ of the benchmarks.

\end{abstract}

%\selectlanguage{german}
%\begin{abstract}
%\centerline{\textbf{Zusammenfassung}}
%
%Algorithmen basierend auf der \emph{FM}-Idee \cite{fiduccia1988linear} sind zur Zeit 
%die einzigsten praktischen Heuristiken, um eine $k$-teilige
%Partitionierung in einem \emph{Multilevel Hypergraph Partitioner} zu verbessern. 
%Jedoch werden sie oft kritisiert für ihre limitierte Eigenschaft
%vorrauszuschauen \cite{zhao2002effective}. Zum Beispiel könnte es von Vorteil sein ein
%Knoten mit geringem \emph{Gain} zu verschieben, weil er vielleicht später viele bessere
%Verschiebungen induziert. Wir präsentieren einen alternativen \emph{Lokale 
%Suche} Ansatz basierend auf \emph{Max-Flow-Min-Cut} Berechnungen. Das Framework ist inspiriert 
%durch die Arbeit von Sanders und Schulz, welche gezeigt haben, dass ein \emph{flow}-basierter
%Ansatz in Kombination mit dem \emph{FM}-Algorithmus signifikant die Qualität von Partitionierungen
%in einem \emph{Multilevel Graph Partitioner} verbessert \cite{sanders2011engineering}. 
%In dieser Arbeit entwickeln wir verschiedene Modellierungstechnicken eines Hypergraphen 
%als Flussnetzwerk und zeigen wie die \emph{connectivity metric} einer $k$-teiligen 
%Partitionierung verbessert werden kann, indem ein Flussproblem auf einer
%Teilmenge der Knoten aufgebaut wird. Wir haben das Framework in den
%\emph{Hypergraph Partitioner KaHyPar} integriert, indem wir das Framework von \cite{sanders2011engineering}
%übernommen und angepasst haben. Auf unserem großen \emph{Benchmark Set} mit $3222$ Instanzen
%erzielt unsere neue Konfiguration auf $70\%$ der Instanzen eine bessere Qualität als die meisten
%\emph{State-of-the-Art} Partitionierer. Im Vergleich zu der letzten Konfiguration von \emph{KaHyPar}
%erreichen wir mit unserem Ansatz $2\%$ bessere Qualität mit nur doppelt so langer Laufzeit.
%
%\end{abstract}

\vfill

\selectlanguage{english}

\vfill\vfill\vfill
\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\vspace*{0pt}\vfill

\section*{Acknowledgements}

A good mentor is important for staying motivated and to have the feeling to work
on something meaningful. Since my bachelor thesis, I work together with Sebastian
Schlag in the research area of \emph{Hypergraph Partitioning}. The decision to further
work on this topic was not only a matter of interest, it was mainly a decision based
on our outstanding interpersonal working relationship. Our intellectual discussions
were characterized by the right balance of fun and the necessary seriousness to work towards
a common goal. I think here is the right place to thank you for the endless time, which I have spent
in your office over the last three years and which have made me a better computer scientist. \\
Further, I would like to thank my girl friend Alessa Dreixler. To be together with a 
computer scientist could be sometimes very complicated and exhausting. Especially,
if anger and frustration dominated my working day. With her understanding and motivation, 
I could continue every morning with the same energy and passion as the day before.


\vfill\vfill\vfill
\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagestyle{normal}
% markiere sections im Seitenkopf links und subsections rechts
\renewcommand\sectionmark[1]{\markboth{\thesection\quad\MakeUppercase{#1}}{\thesection\quad\MakeUppercase{#1}}}
\renewcommand\subsectionmark[1]{\markright{\thesubsection\quad\MakeUppercase{#1}}}

% Inhaltsverzeichnis
\tableofcontents

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\listoffigures
%\listoftables
%\listofalgorithms
%
%\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}

\input{sections/introduction}

\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Preliminaries}
\label{sec:preliminaries}

\input{sections/preliminaries}

\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Related Work}
\label{sec:related_work}

\input{sections/related_work}

\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Hypergraph Flow Networks}
\label{sec:opt_flow_network}
\input{sections/model_flow}

\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Max-Flow-Min-Cut Refinement Framework}
\label{sec:flow_refinement}

\input{sections/flow_refinement}

\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Experimental Results}
\label{sec:experiments}

\input{sections/experiments}

\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Conclusion}
\label{sec:conclusion}

\input{sections/conclusion}

\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{abbrv}
\bibliography{../literature}

\newpage

\begin{appendix}
\input{sections/appendix}
\end{appendix}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
